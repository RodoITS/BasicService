using System;\nusing System.Threading.Tasks;\nusing BasicService.Modules.LocalDB;\nusing BasicService.Service;\n\nnamespace BasicService.Scheduler\n{\n    public class SyncDataScheduler\n    {\n        private WooCommerceApiService _Service;\n        private DblocaleContext _contextEF;\n        private dynamic _wcsettings; // mantenuto come nel progetto attuale\n\n        public SyncDataScheduler(WooCommerceApiService Service, DblocaleContext contextEF, dynamic wcsettings)\n        {\n            _Service = Service;\n            _contextEF = contextEF;\n            _wcsettings = wcsettings;\n        }\n\n        public async Task RunAsync()\n        {\n            try\n            {\n                // Popolo il DB locale con prodotti di esempio se vuoto\n                await SampleProductsSeeder.SeedLocalDbIfEmpty(_contextEF);\n\n                // AGGIORNAMENTO CATEGORIES\n                ManageCategories CategoryManager = new ManageCategories(_Service, _contextEF);\n                var rescat = await CategoryManager.DoOperation();\n\n                // AGGIORNAMENTO BRANDS\n                ManageBrands BrandsManager = new ManageBrands(_Service, _contextEF);\n                var resbrand = await BrandsManager.DoOperation();\n\n                // AGGIORNAMENTO PRODUCTS (legge dal DB locale e pubblica su remoto)\n                ManageProducts ProductsManager = new ManageProducts(_Service, _contextEF, _wcsettings.DefaultPriceList);\n                var resprod = await ProductsManager.DoOperation();\n\n            }\n            catch (Exception ex)\n            {\n                Console.WriteLine($\"SyncDataScheduler RunAsync error: {{ex.Message}}\");\n            }\n        }\n    }\n}